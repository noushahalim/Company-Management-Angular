<app-sidenav [currentRoute]="'/employees'">
    <div class="container mx-auto px-4 py-8">
        <h1 class="text-3xl font-bold text-center mb-8">Update Employee Details</h1>
      
        <div class="flex justify-end mb-8">
          <div class="flex items-center">
            <img [src]="profile" alt="Employee Profile" class="w-16 h-16 mr-4">
            <div class="flex flex-col justify-between">
              <button class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded mb-2" (click)="openModel()">
                <i class="fas fa-camera mr-2"></i> Update Logo
              </button>
              <button class="bg-red-500 hover:bg-red-700 text-white font-bold py-2 px-4 rounded" (click)="deleteLogo()">
                <i class="fas fa-trash-alt mr-2"></i> Delete Logo
              </button>
            </div>
          </div>
        </div>
      
        <form [formGroup]="updationForm" (ngSubmit)="onSubmit()" class="bg-white shadow-md rounded px-8 pt-6 pb-8 mb-4">
          <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
            <div class="mb-4">
              <span class="block text-gray-700 text-sm font-bold mb-2">
                First Name
              </span>
              <input formControlName="firstName" class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline" type="text" placeholder="First Name">
            </div>
            <div class="mb-4">
              <span class="block text-gray-700 text-sm font-bold mb-2">
                Middle Name
              </span>
              <input formControlName="middleName" class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline" type="text" placeholder="Middle Name">
            </div>
            <div class="mb-4">
                <span class="block text-gray-700 text-sm font-bold mb-2">
                  Last Name
                </span>
                <input formControlName="lastName" class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline" type="text" placeholder="Last Name">
              </div>
            <div class="mb-4">
              <span class="block text-gray-700 text-sm font-bold mb-2">
                Office EmailId
              </span>
              <input formControlName="officeEmailId" class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline" type="email" placeholder="Office EmailId">
            </div>
            <div class="mb-4">
              <span class="block text-gray-700 text-sm font-bold mb-2">
                Office Contact No
              </span>
              <input formControlName="officeContactNo" class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline" type="tel" placeholder="Office Contact No">
            </div>
            <div class="mb-4">
              <span class="block text-gray-700 text-sm font-bold mb-2">
                Join On
              </span>
              <input formControlName="joiningOn" class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline" type="date" placeholder="Join On">
            </div>
            <div class="mb-4">
              <span class="block text-gray-700 text-sm font-bold mb-2">
                Relieving On
              </span>
              <input formControlName="relievingOn" class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline" type="date" placeholder="Relieving On">
            </div>
            <div class="mb-4">
              <span class="block text-gray-700 text-sm font-bold mb-2">
                Confirmation On
              </span>
              <input formControlName="confirmationOn" class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline" type="date" placeholder="Confirmation On">
            </div>
            <div class="mb-4">
              <span class="block text-gray-700 text-sm font-bold mb-2">
                Resignation On
              </span>
              <input formControlName="resignationOn" class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline" type="date" placeholder="Resignation On">
            </div>
            <div class="mb-4">
              <span class="block text-gray-700 text-sm font-bold mb-2">
                Designation
              </span>
              <select formControlName="designationId" class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline">
                <option *ngIf="selectedDesignation" value="{{selectedDesignation.id}}" disabled selected>{{selectedDesignation.name}}</option>
                <option *ngIf="!selectedDesignation" selected value="">Select one</option>
                <option *ngFor="let designation of allDesignations" value="{{designation.id}}">{{designation.name}}</option>
              </select>
            </div>
            <div class="mb-4">
              <span class="block text-gray-700 text-sm font-bold mb-2">
                Reporting
              </span>
              <input formControlName="reportingToId" class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline" type="text" placeholder="Reporting">
            </div>
            <div class="mb-4">
              <span class="block text-gray-700 text-sm font-bold mb-2">
                Department
              </span>
            <select formControlName="departmentId" class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline">
                <option *ngIf="selectedDepartment" value="{{selectedDepartment.id}}" disabled selected>{{selectedDepartment.name}}</option>
                <option *ngIf="!selectedDepartment" selected value="">Select one</option>
                <option *ngFor="let department of allDepartments" value="{{department.id}}">{{department.name}}</option>
              </select>
            </div>
          </div>
          <div class="text-center mt-4">
            <button type="submit" class="bg-green-500 hover:bg-green-700 text-white font-bold py-2 px-4 rounded">
              <i class="fas fa-check mr-2"></i> Update Details
            </button>
            <p *ngIf="error" class="text-center relative top-3 mb-2 text-red-600">{{error}}</p>
          </div>
        </form>
    </div>
</app-sidenav>

<div *ngIf="showChangeProfileModal" class="fixed inset-0 z-50 overflow-auto bg-gray-900 bg-opacity-75 flex items-center justify-center">
  <div class="bg-white rounded-lg shadow-lg p-6 max-w-md relative">
    <button class="absolute top-3 right-3 text-gray-500 hover:text-gray-700"
      (click)="closeModal()">
      <svg class="h-6 w-6" fill="none" viewBox="0 0 24 24"
        stroke="currentColor">
        <path stroke-linecap="round" stroke-linejoin="round"
          stroke-width="2" d="M6 18L18 6M6 6l12 12" />
      </svg>
    </button>
    <div class="mb-4">
      <h2 class="text-lg font-semibold">Change Profile Picture</h2>
    </div>
    <form [formGroup]="profileChangeForm"
      (ngSubmit)="updateLogo()">
      <div class="mb-4">
        <label class="block text-gray-700 font-semibold mb-2"
          for="image-upload">Upload Image</label>
        <input class="border border-gray-400 p-2 w-full" id="image-upload"
          type="file" (change)="onImageUpload($event)" accept="image/*"
          formControlName="image">
      </div>
      <div class="mb-4">
        <label class="block text-gray-700 font-semibold mb-2"
          for="image-preview">Preview</label>
        <div class="h-48 bg-gray-200 flex items-center justify-center">
          <img *ngIf="previewImageSrc" [src]="previewImageSrc"
            class="max-h-full max-w-full">
          <span *ngIf="!previewImageSrc" class="text-gray-500">No image
            selected</span>
        </div>
      </div>
      <div class="flex justify-end">
        <button [disabled]="buttonDisabled" type="submit"
          class="bg-blue-500 hover:bg-blue-700 text-white font-semibold py-2 px-4 rounded">
          Submit
        </button>
      </div>
    </form>
  </div>
</div>